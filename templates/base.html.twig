{% set current_route = app.request.attributes.get('_route') %}
{% set current_route_params = app.request.attributes.get('_route_params') %}

<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="msapplication-tap-highlight" content="no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
        <meta name="referrer" content="origin" />

        <title>{% block title 'common.title.default'|trans %}</title>

        <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500|Roboto+Slab:400,700&amp;subset=cyrillic,cyrillic-ext,greek,greek-ext" rel="stylesheet">
        {{ encore_entry_link_tags('lib') }}
        {{ encore_entry_link_tags('app') }}
        {% block stylesheets %}{% endblock %}

        <link rel="canonical" href="{% block meta_canonical url(current_route, current_route_params) %}" />
        <meta name="description" content="{% block meta_description 'base.meta.description'|trans %}" />
        <meta property="og:type" content="website" />
        <meta property="og:site_name" content="{{ 'party_name'|trans }}" />
        <meta property="og:url" content="{{ block('meta_canonical') }}" />
        <meta property="og:title" content="{{ block('title') }}" />
        <meta property="og:description" content="{{ block('meta_description') }}" />
        <meta property="og:image" content="{% block meta_image 'https://eu-renaissance.org/res/sharer/default.png' %}" />
        <meta property="og:image:width" content="{% block meta_image_width 1280 %}" />
        <meta property="og:image:height" content="{% block meta_image_height 560 %}" />
        {% block metas '' %}

        <link rel="apple-touch-icon" sizes="180x180" href="{{ asset('apple-touch-icon.png') }}">
        <link rel="icon" type="image/png" sizes="32x32" href="{{ asset('favicon-32x32.png') }}">
        <link rel="icon" type="image/png" sizes="16x16" href="{{ asset('favicon-16x16.png') }}">
        <link rel="manifest" href="{{ asset('site.webmanifest') }}">
        <link rel="mask-icon" href="{{ asset('safari-pinned-tab.svg') }}" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#3145cd">
        <meta name="theme-color" content="#3145cd">

        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content="{{ block('title') }}" />
        <meta name="twitter:description" content="{{ block('meta_description') }}" />
        <meta name="twitter:image" content="{{ block('meta_image') }}" />

        <script type="application/ld+json">
            {
                "@context": "http://schema.org",
                "@type": "Organization",
                "url": "{{ block('meta_canonical') }}",
                "name": "{{ 'party_name'|trans }}",
                "logo": "https://eu-renaissance.org/res/logo/logo.svg",
                "description": "{{ block('meta_description') }}"
            }
        </script>
    </head>
    <body>
        <header class="header">
            <div class="container">
                <div class="header__row">
                    <div class="header__logo">
                        <a href="">
                            {{ include('_components/logo.html.twig') }}
                        </a>
                    </div>
                    <nav class="header__search">
                        <a href="">
                            {{ 'common.header.find_event'|trans }}
                        </a>
                        <a href="">
                            {{ 'common.header.find_group'|trans }}
                        </a>
                        {% if is_granted('GROUP_CREATE') %}
                            <a href="{{ path('app_group_creation_create') }}" class="text-primary">
                                {{ 'common.header.create_group'|trans }}
                            </a>
                        {% endif %}
                    </nav>
                    <nav class="header__user">
                        {% if app.user %}
                            {% if is_granted('ROLE_ACTOR') %}
                                <a href="{{ path('app_actor_profile_edit') }}">
                                    {{ app.user.fullName }}
                                </a>
                            {% endif %}

                            {% if is_granted('ROLE_ADMIN') %}
                                <a href="{{ path('sonata_admin_dashboard') }}">
                                    {{ 'admin.dashboard.link'|trans }}
                                </a>
                            {% elseif is_granted('ROLE_PREVIOUS_ADMIN') %}
                                <a href="{{ path('app_admin_impersonation_exit') }}">
                                    {{ 'admin.impersonation.quit.link'|trans }}
                                </a>
                            {% endif %}

                            <a href="{{ path('app_logout') }}">
                                {{ 'security.logout'|trans }}
                            </a>
                        {% else %}
                            <a href="{{ path('app_login') }}">
                                {{ 'security.login.link.default'|trans }}
                            </a>
                            <a href="{{ path('app_actor_registration_register') }}">
                                {{ 'actor.registration.register.link.default'|trans }}
                            </a>
                        {% endif %}
                    </nav>
                </div>
            </div>
        </header>

        <div class="container">
            {% block flash_message %}
                {% for message in app.flashes('info') %}
                    <div class="flash notice-flashes">
                        <div class="flash__inner">{{ message|trans }}</div>
                    </div>
                {% endfor %}

                {% block extra_flash_messages '' %}
            {% endblock %}

            {% block body %}{% endblock %}
        </div>

        {% block javascripts %}{% endblock %}
    </body>
</html>
